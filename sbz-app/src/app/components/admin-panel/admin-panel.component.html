<app-navbar></app-navbar>
<div class="row">
    <div class="col">
        <h2 class="title">Manage products</h2>
    </div>
</div>
<br />
<div class="row center">
    <div class="col">
        <button class="btn btn-default font-btn"title="Add new product" (click)="smartModalService.getModal('addProductModal').open()">
            <span class="hover-blue"><fa name="fas fa-plus-square fa-2x" aria-hidden="true"></fa></span>
        </button>
    </div>
</div>
<div class="div-rel">
    <br />
    <div class="row" *ngFor = "let prod of products">
        <div class="col col-lg-2"></div>
        <div class="col col-lg-8 jumbotron div-jumbo">
            {{prod.name}}
        </div>
        <div class="col col-lg-2"></div>
        &nbsp;
    </div>
</div>

<!-- Modal -->
<ngx-smart-modal #addProductModal identifier="addProductModal">
    <h2 class="title">Add product</h2>
    <form [formGroup] = "productForm" (ngSubmit) = "postForm(productForm.value)">
        <div class="form-group">
            <input type="text" formControlName="name" class="form-control" placeholder="Name"
            [ngClass]="{ 'is-invalid': submitted && f.name.errors }">
            <div *ngIf="submitted && f.name.errors" class="invalid-feedback">
                <div *ngIf="f.name.errors.required">Name is required</div>
                <div *ngIf="f.name.errors.minlength">Minimum length is 4 characters</div>
                <div *ngIf="f.name.errors.maxlength">Maximum length is 50 characters</div>
            </div>
        </div>
        <div class="form-group">
            <input type="text" formControlName="manufactorer" class="form-control" placeholder="Manufactorer" [ngClass]="{ 'is-invalid': submitted && f.manufactorer.errors }" >
            <div *ngIf="submitted && f.manufactorer.errors" class="invalid-feedback">
                <div *ngIf="f.manufactorer.errors.required">Manufactorer is required</div>
                <div *ngIf="f.manufactorer.errors.minlength">Minimum length is 2 characters</div>
                <div *ngIf="f.manufactorer.errors.maxlength">Maximum length is 50 characters</div>
            </div>
        </div>
        <div class="form-group">
            <textarea formControlName="description" class="form-control" placeholder="Description" [ngClass]="{ 'is-invalid': submitted && f.description.errors }" ></textarea>
            <div *ngIf="submitted && f.description.errors" class="invalid-feedback">
                <div *ngIf="f.description.errors.maxlength">Maximum length is 300 characters</div>
            </div>
        </div>
        <div class="form-group">
            <input type="text" formControlName="price" class="form-control" placeholder="Price" [ngClass]="{ 'is-invalid': submitted && f.price.errors }" >
            <div *ngIf="submitted && f.price.errors" class="invalid-feedback">
                <div *ngIf="f.price.errors.required">Price is required</div>
                <div *ngIf="f.price.errors.min">Minimum value is 0</div>
                <div *ngIf="f.price.errors.pattern">Invalid value</div>
            </div>
        </div>
        <div class="form-group">
            <input type="text" formControlName="warrantyInMonths" class="form-control" placeholder="Warranty in months" [ngClass]="{ 'is-invalid': submitted && f.warrantyInMonths.errors }" >
            <div *ngIf="submitted && f.warrantyInMonths.errors" class="invalid-feedback">
                <div *ngIf="f.warrantyInMonths.errors.required">Warranty in months is required</div>
                <div *ngIf="f.warrantyInMonths.errors.min">Minimum value is 0</div>
                <div *ngIf="f.warrantyInMonths.errors.pattern">Invalid value</div>
            </div>
        </div>
        <div class="form-group">
            <input type="file" accept="image/*" formControlName="image" class="form-control"
                [ngClass]="{ 'is-invalid': submitted && f.image.errors }" (change)="onFileChange($event)">
            <div *ngIf="submitted && f.image.errors" class="invalid-feedback">
                <div *ngIf="submitted && f.image.errors.required">Image is required</div>
            </div>
        </div>
        <input type="submit" class="btn btn-success" name="addProductBtn" value="Submit" >
    </form>
</ngx-smart-modal>
